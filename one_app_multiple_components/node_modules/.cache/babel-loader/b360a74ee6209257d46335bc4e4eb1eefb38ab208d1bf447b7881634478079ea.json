{"ast":null,"code":"export default {\n  name: \"circleElement\",\n  props: {\n    id: {\n      type: Number,\n      default: 0\n    },\n    mousePosX: {\n      type: Number,\n      default: 0\n    },\n    mousePosY: {\n      type: Number,\n      default: 0\n    },\n    width: {\n      type: String,\n      default: '100px'\n    },\n    height: {\n      type: String,\n      default: '100px'\n    },\n    backgroundColor: {\n      type: String,\n      default: 'green'\n    },\n    selected: {\n      type: Boolean,\n      default: false\n    },\n    moving: {\n      type: Boolean,\n      default: false\n    },\n    resizing: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      movingIntervalId: null,\n      resizingIntervalId: null,\n      elementPosX: 200,\n      elementPosY: 200,\n      offsetX: 0,\n      offsetY: 0,\n      startPosX: 0,\n      startPosY: 0,\n      originalWidth: 0,\n      baseStyle: {\n        position: 'absolute',\n        top: '0px',\n        left: '0px',\n        backgroundColor: this.backgroundColor,\n        width: this.width,\n        height: this.width,\n        fontSize: '30px',\n        fontFamily: 'Arial',\n        border: 'none',\n        borderRadius: '100%',\n        // padding: '20px',\n        textAlign: 'center',\n        textDecoration: 'none',\n        display: 'inline-flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center'\n\n        // margin: '4px 2px',\n        // borderRadius: '100%',\n      },\n\n      selectedStyle: {\n        border: 'none'\n      }\n    };\n  },\n  mounted() {\n    this.setElementPos();\n  },\n  methods: {\n    setElementPos() {\n      this.baseStyle.left = this.elementPosX.toString() + 'px';\n      this.baseStyle.top = this.elementPosY.toString() + 'px';\n    },\n    executeMouseDown(event) {\n      if (event.button == 0 && !this.multipleSelected) {\n        this.startDragging();\n      }\n    },\n    executeMouseUp(event) {\n      if (event.button == 0) {\n        this.stopDragging();\n      }\n    },\n    startDragging() {\n      if (this.canMove && !this.editingFlag) {\n        this.dragging = true;\n        this.offsetY = this.mousePosY - this.elementPosY;\n        this.offsetX = this.mousePosX - this.elementPosX;\n        this.draggingIntervalId = setInterval(() => {\n          this.drag();\n        }, 25);\n      }\n    },\n    stopDragging() {\n      this.dragging = false;\n      clearInterval(this.draggingIntervalId);\n    },\n    drag() {\n      if (this.dragging) {\n        this.elementPosX = this.mousePosX - this.offsetX;\n        this.elementPosY = this.mousePosY - this.offsetY;\n        this.baseStyle.top = this.elementPosY.toString() + 'px';\n        this.baseStyle.left = this.elementPosX.toString() + 'px';\n      }\n    },\n    editElementProps() {\n      this.selectElement(false);\n      if (this.adjustable) {\n        this.editingFlag = true;\n        this.originalWidth = this.baseStyle.width;\n        // this.baseStyle.width = '50px';\n        this.baseStyle.border = '5px dashed black';\n        this.startPosX = this.mousePosX;\n        this.startPosY = this.mousePosY;\n        this.editingIntervalId = setInterval(() => {\n          this.resize();\n        }, 25);\n      }\n    },\n    setElementProps(event) {\n      if (event.key == \"Enter\") {\n        this.baseStyle.border = 'none';\n        this.editingFlag = false;\n        clearInterval(this.editingIntervalId);\n      } else if (event.key == \"Escape\") {\n        if (this.dragging) {\n          this.stopDragging();\n        } else if (this.editingFlag) {\n          this.baseStyle.border = 'none';\n          clearInterval(this.editingIntervalId);\n          this.baseStyle.width = this.originalWidth;\n          this.baseStyle.height = this.originalWidth;\n          this.editingFlag = false;\n        }\n      }\n      this.selectElement(true);\n    },\n    resize(flag) {\n      this.selectElement(false);\n      if (flag) {\n        this.baseStyle.border = '5px dashed black';\n      }\n\n      // if (this.editingFlag){\n      //   var width = parseInt(this.baseStyle.width.split(\"px\")[0]) +(this.mousePosX - this.startPosX);\n      //   // var height = parseInt(this.baseStyle.width.split(\"px\")[0])+ (this.mousePosX - this.startPosX);\n      //   if (width <0) {\n      //     width *= -1;\n      //   }\n      //     // var biggerDimension = 0;\n      //     // if (width >= height){\n      //     //   biggerDimension = width;\n      //     // } else {\n      //     //   biggerDimension = height;\n      //     // }\n      //\n      //     if (width < 5){\n      //       width = 5;\n      //     }\n      //     this.baseStyle.width = width.toString() + 'px';\n      //     this.baseStyle.height = width.toString() + 'px';\n      //     this.startPosX = this.mousePosX;\n      //\n      // }\n    },\n\n    selectElement(select) {\n      if (!this.resizing) {\n        if (select) {\n          this.selectedStyle['border'] = '3px solid black';\n        } else {\n          this.selectedStyle = {};\n        }\n      }\n      //\n      // if (!this.editingFlag){\n      //   if (select){\n      //   this.selectedStyle['border'] =  '3px solid black';\n      // } else {\n      //   this.selectedStyle = {};\n      // }\n      // }\n    },\n\n    handleKeyPress(event) {\n      if (event.key == \"Escape\") {}\n    }\n  },\n  watch: {\n    selected(newValue) {\n      this.selectElement(newValue);\n    },\n    resizing(newValue) {\n      this.resize(newValue);\n    }\n  }\n};","map":{"version":3,"mappings":"AAQA,eAAe;EACfA,IAAI,EAAE,eAAe;EACnBC,KAAK,EAAE;IACLC,EAAE,EAAE;MACFC,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAC;IACV,CAAC;IACDC,SAAS,EAAE;MACTH,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAE;IACX,CAAC;IACDE,SAAS,EAAE;MACTJ,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAE;IACX,CAAC;IACDG,KAAK,EAAE;MACCL,IAAI,EAAEM,MAAM;MACZJ,OAAO,EAAE;IACX,CAAC;IACPK,MAAM,EAAE;MACAP,IAAI,EAAEM,MAAM;MACZJ,OAAO,EAAE;IACX,CAAC;IACPM,eAAe,EAAE;MACRR,IAAI,EAAEM,MAAM;MACZJ,OAAO,EAAE;IACV,CAAC;IACTO,QAAQ,EAAE;MACRT,IAAI,EAAEU,OAAO;MACbR,OAAO,EAAE;IACX,CAAC;IACDS,MAAM,EAAE;MACNX,IAAI,EAAEU,OAAO;MACbR,OAAO,EAAE;IACX,CAAC;IACDU,QAAQ,EAAE;MACRZ,IAAI,EAAEU,OAAO;MACbR,OAAO,EAAE;IACX;EAEF,CAAC;EACDW,IAAI,GAAE;IACN,OAAO;MACLC,gBAAgB,EAAE,IAAI;MACtBC,kBAAkB,EAAE,IAAI;MACxBC,WAAW,EAAE,GAAG;MAChBC,WAAW,EAAC,GAAG;MACfC,OAAO,EAAC,CAAC;MACTC,OAAO,EAAC,CAAC;MACTC,SAAS,EAAE,CAAC;MACZC,SAAS,EAAE,CAAC;MACZC,aAAa,EAAC,CAAC;MACfC,SAAS,EAAE;QACTC,QAAQ,EAAE,UAAU;QACpBC,GAAG,EAAE,KAAK;QACVC,IAAI,EAAE,KAAK;QACXlB,eAAe,EAAE,IAAI,CAACA,eAAe;QACrCH,KAAK,EAAE,IAAI,CAACA,KAAK;QACjBE,MAAM,EAAE,IAAI,CAACF,KAAK;QAClBsB,QAAQ,EAAE,MAAM;QAChBC,UAAU,EAAE,OAAO;QACnBC,MAAM,EAAE,MAAM;QACdC,YAAY,EAAE,MAAM;QACpB;QACAC,SAAS,EAAE,QAAQ;QACnBC,cAAc,EAAE,MAAM;QACtBC,OAAO,EAAE,aAAa;QACtBC,aAAa,EAAE,QAAQ;QACvBC,cAAc,EAAE,QAAQ;QACxBC,UAAU,EAAE;;QAEZ;QACA;MAEF,CAAC;;MACDC,aAAa,EAAE;QACbR,MAAM,EAAE;MACV;IAEF;EACA,CAAC;EACDS,OAAM,GAAK;IACX,IAAI,CAACC,aAAa,EAAC;EACnB,CAAC;EACDC,OAAO,EAAE;IACCD,aAAa,GAAE;MACf,IAAI,CAAChB,SAAS,CAACG,IAAG,GAAI,IAAI,CAACV,WAAW,CAACyB,QAAQ,EAAC,GAAI,IAAI;MACxD,IAAI,CAAClB,SAAS,CAACE,GAAE,GAAI,IAAI,CAACR,WAAW,CAACwB,QAAQ,EAAC,GAAI,IAAI;IACvD,CAAC;IACDC,gBAAgB,CAACC,KAAK,EAAC;MACrB,IAAIA,KAAK,CAACC,MAAK,IAAK,KAAK,CAAC,IAAI,CAACC,gBAAgB,EAAE;QAC/C,IAAI,CAACC,aAAa,EAAC;MACrB;IACF,CAAC;IACDC,cAAc,CAACJ,KAAK,EAAC;MACnB,IAAIA,KAAK,CAACC,MAAK,IAAK,CAAC,EAAE;QACrB,IAAI,CAACI,YAAY,EAAC;MACpB;IACF,CAAC;IACDF,aAAa,GAAE;MACX,IAAI,IAAI,CAACG,OAAM,IAAK,CAAC,IAAI,CAACC,WAAW,EAAE;QACrC,IAAI,CAACC,QAAO,GAAI,IAAI;QACpB,IAAI,CAAChC,OAAM,GAAI,IAAI,CAACf,SAAQ,GAAI,IAAI,CAACa,WAAW;QAChD,IAAI,CAACC,OAAM,GAAI,IAAI,CAACf,SAAQ,GAAI,IAAI,CAACa,WAAW;QAChD,IAAI,CAACoC,kBAAiB,GAAIC,WAAW,CAAC,MAAM;UAC1C,IAAI,CAACC,IAAI,EAAE;QACb,CAAC,EAAE,EAAE,CAAC;MACR;IAIJ,CAAC;IACDN,YAAY,GAAE;MACV,IAAI,CAACG,QAAO,GAAI,KAAI;MACpBI,aAAa,CAAC,IAAI,CAACH,kBAAkB;IAEvC,CAAC;IACHE,IAAI,GAAE;MACJ,IAAI,IAAI,CAACH,QAAQ,EAAC;QAChB,IAAI,CAACnC,WAAU,GAAI,IAAI,CAACb,SAAQ,GAAI,IAAI,CAACe,OAAO;QAChD,IAAI,CAACD,WAAU,GAAI,IAAI,CAACb,SAAQ,GAAI,IAAI,CAACe,OAAO;QAChD,IAAI,CAACI,SAAS,CAACE,GAAE,GAAI,IAAI,CAACR,WAAW,CAACwB,QAAQ,EAAC,GAAG,IAAI;QACtD,IAAI,CAAClB,SAAS,CAACG,IAAG,GAAI,IAAI,CAACV,WAAW,CAACyB,QAAQ,EAAC,GAAG,IAAI;MAEzD;IACA,CAAC;IACHe,gBAAgB,GAAE;MAChB,IAAI,CAACC,aAAa,CAAC,KAAK;MACxB,IAAI,IAAI,CAACC,UAAU,EAAE;QACnB,IAAI,CAACR,WAAU,GAAI,IAAI;QACvB,IAAI,CAAC5B,aAAY,GAAI,IAAI,CAACC,SAAS,CAAClB,KAAK;QACzC;QACA,IAAI,CAACkB,SAAS,CAACM,MAAK,GAAI,kBAAiB;QACzC,IAAI,CAACT,SAAQ,GAAI,IAAI,CAACjB,SAAS;QAC/B,IAAI,CAACkB,SAAQ,GAAI,IAAI,CAACjB,SAAS;QAC/B,IAAI,CAACuD,iBAAgB,GAAIN,WAAW,CAAC,MAAM;UACnC,IAAI,CAACO,MAAM,EAAE;QACf,CAAC,EAAE,EAAE,CAAC;MACd;IACF,CAAC;IACDC,eAAe,CAAClB,KAAK,EAAC;MACpB,IAAIA,KAAK,CAACmB,GAAE,IAAK,OAAO,EAAC;QACvB,IAAI,CAACvC,SAAS,CAACM,MAAK,GAAI,MAAM;QAC9B,IAAI,CAACqB,WAAU,GAAI,KAAK;QAC1BK,aAAa,CAAC,IAAI,CAACI,iBAAiB;MACpC,OACK,IAAIhB,KAAK,CAACmB,GAAG,IAAG,QAAQ,EAAE;QAC7B,IAAI,IAAI,CAACX,QAAQ,EAAE;UACjB,IAAI,CAACH,YAAY,EAAC;QACpB,OACK,IAAI,IAAI,CAACE,WAAW,EAAE;UACzB,IAAI,CAAC3B,SAAS,CAACM,MAAK,GAAI,MAAM;UAC9B0B,aAAa,CAAC,IAAI,CAACI,iBAAiB;UACtC,IAAI,CAACpC,SAAS,CAAClB,KAAI,GAAI,IAAI,CAACiB,aAAa;UACzC,IAAI,CAACC,SAAS,CAAChB,MAAK,GAAI,IAAI,CAACe,aAAa;UAC1C,IAAI,CAAC4B,WAAU,GAAI,KAAK;QACxB;MACF;MACA,IAAI,CAACO,aAAa,CAAC,IAAI,CAAC;IAE1B,CAAC;IACDG,MAAM,CAACG,IAAI,EAAC;MACV,IAAI,CAACN,aAAa,CAAC,KAAK;MACxB,IAAIM,IAAI,EAAE;QACR,IAAI,CAACxC,SAAS,CAACM,MAAK,GAAI,kBAAiB;MAC3C;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IAEF,CAAC;;IACD4B,aAAa,CAACO,MAAM,EAAC;MACnB,IAAI,CAAC,IAAI,CAACpD,QAAQ,EAAE;QAClB,IAAIoD,MAAM,EAAC;UACX,IAAI,CAAC3B,aAAa,CAAC,QAAQ,IAAK,iBAAiB;QACnD,OAAO;UACL,IAAI,CAACA,aAAY,GAAI,CAAC,CAAC;QACzB;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IAGF,CAAC;;IACD4B,cAAc,CAACtB,KAAK,EAAE;MACtB,IAAIA,KAAK,CAACmB,GAAE,IAAK,QAAQ,EAAE,CAE3B;IACA;EAEV,CAAC;EACDI,KAAK,EAAC;IACJzD,QAAQ,CAAC0D,QAAQ,EAAC;MAClB,IAAI,CAACV,aAAa,CAACU,QAAQ;IAC7B,CAAC;IACCvD,QAAQ,CAACuD,QAAQ,EAAC;MAChB,IAAI,CAACP,MAAM,CAACO,QAAQ;IACtB;EAGF;AAIF","names":["name","props","id","type","Number","default","mousePosX","mousePosY","width","String","height","backgroundColor","selected","Boolean","moving","resizing","data","movingIntervalId","resizingIntervalId","elementPosX","elementPosY","offsetX","offsetY","startPosX","startPosY","originalWidth","baseStyle","position","top","left","fontSize","fontFamily","border","borderRadius","textAlign","textDecoration","display","flexDirection","justifyContent","alignItems","selectedStyle","mounted","setElementPos","methods","toString","executeMouseDown","event","button","multipleSelected","startDragging","executeMouseUp","stopDragging","canMove","editingFlag","dragging","draggingIntervalId","setInterval","drag","clearInterval","editElementProps","selectElement","adjustable","editingIntervalId","resize","setElementProps","key","flag","select","handleKeyPress","watch","newValue"],"sourceRoot":"","sources":["/Users/ihm/myDrive/private/learning_vue/one_app_multiple_components/src/components/movableElements/circleElement.vue"],"sourcesContent":["<template>\n<div :style=\"[baseStyle, selectedStyle]\"\n>\n\n  </div>\n</template>\n\n<script>\nexport default {\nname: \"circleElement\",\n  props: {\n    id: {\n      type: Number,\n      default:0\n    },\n    mousePosX: {\n      type: Number,\n      default: 0\n    },\n    mousePosY: {\n      type: Number,\n      default: 0\n    },\n    width: {\n            type: String,\n            default: '100px'\n          },\n    height: {\n            type: String,\n            default: '100px'\n          },\n    backgroundColor: {\n             type: String,\n             default: 'green'\n            },\n    selected: {\n      type: Boolean,\n      default: false,\n    },\n    moving: {\n      type: Boolean,\n      default: false,\n    },\n    resizing: {\n      type: Boolean,\n      default: false,\n    }\n\n  },\n  data(){\n  return {\n    movingIntervalId: null,\n    resizingIntervalId: null,\n    elementPosX: 200,\n    elementPosY:200,\n    offsetX:0,\n    offsetY:0,\n    startPosX: 0,\n    startPosY: 0,\n    originalWidth:0,\n    baseStyle: {\n      position: 'absolute',\n      top: '0px',\n      left: '0px',\n      backgroundColor: this.backgroundColor,\n      width: this.width,\n      height: this.width,\n      fontSize: '30px',\n      fontFamily: 'Arial',\n      border: 'none',\n      borderRadius: '100%',\n      // padding: '20px',\n      textAlign: 'center',\n      textDecoration: 'none',\n      display: 'inline-flex',\n      flexDirection: 'column',\n      justifyContent: 'center',\n      alignItems: 'center',\n\n      // margin: '4px 2px',\n      // borderRadius: '100%',\n\n    },\n    selectedStyle: {\n      border: 'none'\n    },\n\n  }\n  },\n  mounted () {\n  this.setElementPos()\n  },\n  methods: {\n            setElementPos(){\n            this.baseStyle.left = this.elementPosX.toString() + 'px';\n            this.baseStyle.top = this.elementPosY.toString() + 'px';\n            },\n            executeMouseDown(event){\n              if (event.button == 0 && !this.multipleSelected) {\n                this.startDragging()\n              }\n            },\n            executeMouseUp(event){\n              if (event.button == 0) {\n                this.stopDragging()\n              }\n            },\n            startDragging(){\n                if (this.canMove && !this.editingFlag) {\n                  this.dragging = true;\n                  this.offsetY = this.mousePosY - this.elementPosY;\n                  this.offsetX = this.mousePosX - this.elementPosX;\n                  this.draggingIntervalId = setInterval(() => {\n                    this.drag();\n                  }, 25);\n                }\n\n\n\n            },\n            stopDragging(){\n                this.dragging = false\n                clearInterval(this.draggingIntervalId)\n\n              },\n            drag(){\n              if (this.dragging){\n                this.elementPosX = this.mousePosX - this.offsetX;\n                this.elementPosY = this.mousePosY - this.offsetY;\n                this.baseStyle.top = this.elementPosY.toString() +'px';\n                this.baseStyle.left = this.elementPosX.toString() +'px';\n\n              }\n              },\n            editElementProps(){\n              this.selectElement(false)\n              if (this.adjustable) {\n                this.editingFlag = true;\n                this.originalWidth = this.baseStyle.width;\n                // this.baseStyle.width = '50px';\n                this.baseStyle.border = '5px dashed black'\n                this.startPosX = this.mousePosX;\n                this.startPosY = this.mousePosY;\n                this.editingIntervalId = setInterval(() => {\n                        this.resize();\n                      }, 25);\n              }\n            },\n            setElementProps(event){\n              if (event.key == \"Enter\"){\n                this.baseStyle.border = 'none';\n                this.editingFlag = false;\n              clearInterval(this.editingIntervalId)\n              }\n              else if (event.key== \"Escape\") {\n                if (this.dragging) {\n                  this.stopDragging()\n                }\n                else if (this.editingFlag) {\n                  this.baseStyle.border = 'none';\n                  clearInterval(this.editingIntervalId)\n                this.baseStyle.width = this.originalWidth;\n                this.baseStyle.height = this.originalWidth;\n                this.editingFlag = false;\n                }\n              }\n              this.selectElement(true);\n\n            },\n            resize(flag){\n              this.selectElement(false)\n              if (flag) {\n                this.baseStyle.border = '5px dashed black'\n              }\n\n              // if (this.editingFlag){\n              //   var width = parseInt(this.baseStyle.width.split(\"px\")[0]) +(this.mousePosX - this.startPosX);\n              //   // var height = parseInt(this.baseStyle.width.split(\"px\")[0])+ (this.mousePosX - this.startPosX);\n              //   if (width <0) {\n              //     width *= -1;\n              //   }\n              //     // var biggerDimension = 0;\n              //     // if (width >= height){\n              //     //   biggerDimension = width;\n              //     // } else {\n              //     //   biggerDimension = height;\n              //     // }\n              //\n              //     if (width < 5){\n              //       width = 5;\n              //     }\n              //     this.baseStyle.width = width.toString() + 'px';\n              //     this.baseStyle.height = width.toString() + 'px';\n              //     this.startPosX = this.mousePosX;\n              //\n              // }\n\n            },\n            selectElement(select){\n              if (!this.resizing) {\n                if (select){\n                this.selectedStyle['border'] =  '3px solid black';\n              } else {\n                this.selectedStyle = {};\n              }\n              }\n              //\n              // if (!this.editingFlag){\n              //   if (select){\n              //   this.selectedStyle['border'] =  '3px solid black';\n              // } else {\n              //   this.selectedStyle = {};\n              // }\n              // }\n\n\n            },\n            handleKeyPress(event) {\n            if (event.key == \"Escape\") {\n\n            }\n            }\n\n  },\n  watch:{\n    selected(newValue){\n    this.selectElement(newValue)\n  },\n    resizing(newValue){\n      this.resize(newValue)\n    },\n\n\n  }\n\n\n\n}\n</script>\n\n<style scoped>\n\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}