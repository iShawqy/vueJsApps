{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  name: \"messageInputArea\",\n  props: [\"chatter\", \"chattee\"],\n  mounted() {\n    this.statusInterval = setInterval(this.updateStatus, 500);\n  },\n  unmounted() {\n    clearInterval(this.statusInterval);\n  },\n  data() {\n    return {\n      message: \"\",\n      usersUrl: \"http://localhost:3004/users\",\n      messagesUrl: \"http://localhost:3004/messages\",\n      focused: false,\n      lastState: false,\n      statusInterval: null,\n      response: '',\n      chatterCopy: {}\n    };\n  },\n  methods: {\n    sendMessage() {\n      console.log(this.message);\n      if (this.message != \"\" && this.message != \"\\n\") {\n        var currentdate = new Date();\n        var datetime = currentdate.getDate() + \"/\" + (currentdate.getMonth() + 1) + \"/\" + currentdate.getFullYear() + \" @ \" + currentdate.getHours() + \":\" + currentdate.getMinutes();\n        var data = {\n          content: this.message,\n          timestamp: datetime,\n          creator: this.chatter.name,\n          destination: this.chattee.name\n        };\n        axios({\n          method: 'post',\n          url: this.messagesUrl,\n          data: data\n        }).then(response => {\n          this.response = response;\n          this.message = \"\";\n          this.$toast.success('sent', {\n            position: \"bottom\",\n            duration: 250\n          });\n        }).catch(error => {\n          this.response = error;\n          this.$toast.error('Error while logging you in', {\n            position: \"bottom\"\n          });\n        });\n      } else {\n        this.message = \"\";\n      }\n    },\n    onFocus() {\n      this.focused = true;\n    },\n    outFocus() {\n      this.focused = false;\n    },\n    updateStatus() {\n      if (this.focused && this.message != '') {\n        this.chatterCopy = this.chatter;\n        this.chatterCopy.status = 'typing...';\n      } else {\n        this.chatterCopy = this.chatter;\n        this.chatterCopy.status = 'Online';\n      }\n      axios({\n        method: 'put',\n        url: this.usersUrl + '/' + this.chatter.id,\n        data: this.chatterCopy\n      }).then(response => {\n        this.response = response;\n      }).catch(error => {\n        this.response = error;\n        this.$toast.error('Error while updating status', {\n          position: \"bottom\"\n        });\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","name","props","mounted","statusInterval","setInterval","updateStatus","unmounted","clearInterval","data","message","usersUrl","messagesUrl","focused","lastState","response","chatterCopy","methods","sendMessage","console","log","currentdate","Date","datetime","getDate","getMonth","getFullYear","getHours","getMinutes","content","timestamp","creator","chatter","destination","chattee","method","url","then","$toast","success","position","duration","catch","error","onFocus","outFocus","status","id"],"sourceRoot":"","sources":["/Users/ihm/myDrive/private/git_vuejs_apps/one_app_multiple_components/src/components/chattingApp/messageInputArea.vue"],"sourcesContent":["<template>\n<!--<div >-->\n  <textarea class=\"messageInputMainContainer\"\n            v-model=\"message\" placeholder=\"Type a message\"\n            @keyup.enter=\"sendMessage\" @focus=\"onFocus\" @blur=\"outFocus\"\n  ></textarea>\n<!--</div>-->\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\nname: \"messageInputArea\",\nprops: [\"chatter\", \"chattee\"],\nmounted() {\n  this.statusInterval = setInterval(this.updateStatus, 500)\n},\nunmounted() {\nclearInterval(this.statusInterval)\n},\n  data(){\n  return {\n    message:\"\",\n    usersUrl: \"http://localhost:3004/users\",\n    messagesUrl: \"http://localhost:3004/messages\",\n    focused: false,\n    lastState: false,\n    statusInterval:null,\n    response:'',\n    chatterCopy: {},\n\n  }\n\n},\n  methods:{\n  sendMessage(){\n    console.log(this.message)\n    if (this.message != \"\" && this.message != \"\\n\") {\n      var currentdate = new Date();\n      var datetime = currentdate.getDate() + \"/\"\n                  + (currentdate.getMonth()+1)  + \"/\"\n                  + currentdate.getFullYear() + \" @ \"\n                  + currentdate.getHours() + \":\"\n                  + currentdate.getMinutes()\n\n\n\n      var data = {\n        content: this.message,\n        timestamp: datetime,\n        creator: this.chatter.name,\n        destination: this.chattee.name,\n      }\n      axios({\n          method: 'post',\n          url:this.messagesUrl,\n          data: data\n        })\n        .then(response => {\n          this.response = response;\n          this.message = \"\";\n          this.$toast.success('sent',  {\n          position: \"bottom\",\n          duration: 250})\n        })\n        .catch(error => {\n          this.response = error;\n          this.$toast.error('Error while logging you in', {\n          position: \"bottom\"});\n        })\n    }\n    else {\n      this.message = \"\";\n    }\n\n  },\n  onFocus(){\n    this.focused = true;\n  },\n  outFocus(){\n    this.focused = false;\n  },\n  updateStatus(){\n\n      if (this.focused && this.message != '') {\n        this.chatterCopy = this.chatter;\n        this.chatterCopy.status = 'typing...';\n\n      } else {\n        this.chatterCopy = this.chatter;\n        this.chatterCopy.status = 'Online';\n      }\n      axios({\n        method: 'put',\n        url:this.usersUrl + '/' + this.chatter.id,\n        data: this.chatterCopy\n      })\n      .then(response => {\n        this.response = response;\n      })\n      .catch(error => {\n        this.response = error;\n        this.$toast.error('Error while updating status', {\n        position: \"bottom\"});\n      })\n\n\n\n\n\n\n  },\n  }\n}\n</script>\n\n<style scoped>\n.messageInputMainContainer{\n  display: flex;\n  width: 100%;\n  height: 50px;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: flex-start;\n  flex-wrap: wrap;\n  background-color: #17211b;\n  border-radius: 5px;\n  border-color: #17211b;\n  color: white;\n  overflow-y: scroll;\n  font-size: 20px;\n  font-family: Arial;\n  margin: 5px;\n  resize: none;\n\n}\n\n.messageInputMainContainer:focus {\n    outline-width: 0;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}