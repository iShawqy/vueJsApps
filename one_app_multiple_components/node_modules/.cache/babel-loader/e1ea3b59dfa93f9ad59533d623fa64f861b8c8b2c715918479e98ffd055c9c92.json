{"ast":null,"code":"import squareElement from \"@/components/movableElements/squareElement\";\nimport rectangleElement from \"@/components/movableElements/rectangleElement\";\nimport CircleElement from \"@/components/movableElements/circleElement\";\nimport elementsBrowser from \"@/components/movableElements/elementsBrowser\";\nexport default {\n  name: \"mainMovableElements\",\n  components: {\n    CircleElement,\n    squareElement,\n    rectangleElement,\n    elementsBrowser\n  },\n  data() {\n    return {\n      mousePosX: 0,\n      mousePosY: 0,\n      elements: {\n        circle: {},\n        square: {},\n        rectangle: {}\n      },\n      elementsHighestId: 0,\n      elementsCount: 0,\n      elementsDefaultBackgroundColors: {\n        circle: 'red',\n        square: 'blue',\n        rectangle: 'green'\n      },\n      selectedItems: {},\n      multipleSelected: false,\n      dragging: false,\n      draggingIntervalId: null\n    };\n  },\n  mounted() {\n    setInterval(() => {\n      this.updateMultipleSelected();\n    }, 50);\n  },\n  methods: {\n    updateMousePos(event) {\n      this.mousePosX = event.clientX;\n      this.mousePosY = event.clientY;\n    },\n    handleSelectedElement(element, event) {\n      for (const [type, els] of Object.entries(this.elements)) {\n        for (const [id, elData] of Object.entries(this.elements[type])) {\n          if (element != null) {\n            if (id == element.id) {\n              if (!event.shiftKey) {\n                this.elements[type][id].selected = true;\n                this.selectedItems[id] = elData;\n              } else {\n                if (this.elements[type][id].selected) {\n                  this.elements[type][id].selected = false;\n                  if (this.selectedItems.hasOwnProperty(id)) {\n                    delete this.selectedItems[id];\n                  }\n                } else {\n                  this.elements[type][id].selected = true;\n                  this.selectedItems[id] = elData;\n                }\n              }\n            } else {\n              if (!event.shiftKey) {\n                this.elements[type][id].selected = false;\n                if (this.selectedItems.hasOwnProperty(id)) {\n                  delete this.selectedItems[id];\n                }\n              }\n            }\n          } else {\n            this.elements[type][id].selected = false;\n            if (this.selectedItems.hasOwnProperty(id)) {\n              delete this.selectedItems[id];\n            }\n          }\n        }\n      }\n    },\n    handleKeyPress(event) {\n      if (event.key == \"Delete\") {\n        for (const [id, value] of Object.entries(this.selectedItems)) {\n          delete this.elements[value.type][id];\n          if (this.selectedItems.hasOwnProperty(id)) {\n            delete this.selectedItems[id];\n          }\n          this.elementsCount -= 1;\n        }\n      }\n    },\n    addNewElement(type) {\n      var elementId = this.elementsHighestId + 1;\n      var elementData = {\n        type: type,\n        id: elementId,\n        selected: false,\n        moving: false,\n        resizing: false,\n        backgroundColor: this.elementsDefaultBackgroundColors[type]\n      };\n      this.elements[type][elementId] = elementData;\n      this.elementsHighestId += 1;\n      this.elementsCount += 1;\n    },\n    updateMultipleSelected() {\n      if (Object.keys(this.selectedItems).length > 1) {\n        this.multipleSelected = true;\n      } else {\n        this.multipleSelected = false;\n      }\n    },\n    executeMouseDown(event) {\n      if (event.button == 0 && this.multipleSelected) {\n        this.startDragging();\n      }\n    },\n    executeMouseUp(event) {\n      if (event.button == 0) {\n        this.stopDragging();\n      }\n    },\n    startDragging() {\n      this.draggingIntervalId = setInterval(() => {\n        this.drag();\n      }, 25);\n    },\n    drag() {\n      this.dragging = true;\n    },\n    stopDragging() {\n      this.dragging = false;\n      clearInterval(this.draggingIntervalId);\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["squareElement","rectangleElement","CircleElement","elementsBrowser","name","components","data","mousePosX","mousePosY","elements","circle","square","rectangle","elementsHighestId","elementsCount","elementsDefaultBackgroundColors","selectedItems","multipleSelected","dragging","draggingIntervalId","mounted","setInterval","updateMultipleSelected","methods","updateMousePos","event","clientX","clientY","handleSelectedElement","element","type","els","Object","entries","id","elData","shiftKey","selected","hasOwnProperty","handleKeyPress","key","value","addNewElement","elementId","elementData","moving","resizing","backgroundColor","keys","length","executeMouseDown","button","startDragging","executeMouseUp","stopDragging","drag","clearInterval"],"sourceRoot":"","sources":["/Users/ihm/myDrive/private/learning_vue/one_app_multiple_components/src/components/movableElements/mainMovableElements.vue"],"sourcesContent":["<template>\n<div class=\"mainContainer\" @mousemove=\"updateMousePos($event)\"\n     @click=\"handleSelectedElement(null)\"\n     @keyup=\"handleKeyPress($event)\" tabindex=\"0\"\n     @mousedown=\"executeMouseDown($event)\"\n     @mouseup=\"executeMouseUp($event)\"\n\n>\n  <elements-browser class=\"elementsBrowser animate__animated animate__fadeInLeft\"\n\n                    @addElement=\"addNewElement\" v-if=\"mousePosX<100\">\n\n  </elements-browser>\n\n  <circle-element  v-for=\"element in elements.circle\"\n                   :id=\"element.id\"\n                   :key=\"element.id\"\n                   :moving=\"element.moving\"\n                   :resizing=\"element.resizing\"\n                   :background-color=\"element.backgroundColor\"\n                   @click=\"handleSelectedElement(element, $event)\"\n                   v-on:click.stop :selected=\"element.selected\"\n                   :mouse-pos-x=\"mousePosX\" :mouse-pos-y=\"mousePosY\"\n\n  >\n</circle-element>\n\n\n<!--    <square-element  v-for=\"element in elements.square\"-->\n<!--                   :id=\"element.id\"-->\n<!--                   :key=\"element.id\"-->\n<!--                   :can-move=\"element.canMove\"-->\n<!--                   :background-color=\"element.backgroundColor\"-->\n<!--                   @click=\"handleSelectedElement(element, $event)\"-->\n<!--                   v-on:click.stop :selected-flag=\"element.selected\"-->\n<!--                   :mouse-pos-x=\"mousePosX\" :mouse-pos-y=\"mousePosY\"-->\n<!--                   :multiple-selected=\"multipleSelected\"-->\n<!--  >-->\n<!--</square-element>-->\n\n<!--   <rectangle-element  v-for=\"element in elements.rectangle\"-->\n<!--                   :id=\"element.id\"-->\n<!--                   :key=\"element.id\"-->\n<!--                   :can-move=\"element.canMove\"-->\n<!--                   :background-color=\"element.backgroundColor\"-->\n<!--                   @click=\"handleSelectedElement(element, $event)\"-->\n<!--                   v-on:click.stop :selected-flag=\"element.selected\"-->\n<!--                   :mouse-pos-x=\"mousePosX\" :mouse-pos-y=\"mousePosY\"-->\n<!--                   :multiple-selected=\"multipleSelected\"-->\n<!--  >-->\n<!--</rectangle-element>-->\n\n  </div>\n</template>\n\n<script>\nimport squareElement from \"@/components/movableElements/squareElement\";\nimport rectangleElement from \"@/components/movableElements/rectangleElement\";\nimport CircleElement from \"@/components/movableElements/circleElement\";\nimport elementsBrowser from \"@/components/movableElements/elementsBrowser\";\n\n\nexport default {\nname: \"mainMovableElements\",\n  components:{CircleElement, squareElement,\n    rectangleElement, elementsBrowser},\n  data(){\n  return {\n    mousePosX: 0,\n    mousePosY: 0,\n    elements: {\n      circle: {},\n      square: {},\n      rectangle: {},\n    },\n    elementsHighestId: 0,\n    elementsCount: 0,\n    elementsDefaultBackgroundColors: {\n      circle: 'red',\n      square: 'blue',\n      rectangle: 'green'\n    },\n    selectedItems: {},\n    multipleSelected: false,\n    dragging: false,\n    draggingIntervalId: null,\n\n  }\n  },\n  mounted() {\n    setInterval(() => {\n              this.updateMultipleSelected();\n            }, 50);\n  },\n  methods:{\n    updateMousePos(event){\n      this.mousePosX = event.clientX;\n      this.mousePosY = event.clientY;\n    },\n    handleSelectedElement(element, event){\n        for (const [type, els] of Object.entries(this.elements)) {\n          for (const [id, elData] of Object.entries(this.elements[type])) {\n            if (element != null) {\n              if (id == element.id) {\n                if (!event.shiftKey) {\n                  this.elements[type][id].selected = true;\n                  this.selectedItems[id] = elData;\n                }\n                else{\n                  if (this.elements[type][id].selected){\n                  this.elements[type][id].selected = false;\n                  if (this.selectedItems.hasOwnProperty(id)){\n                    delete this.selectedItems[id]\n                  }\n\n                }\n                  else {\n                    this.elements[type][id].selected = true;\n                  this.selectedItems[id] = elData;\n                  }\n                }\n\n              }\n              else {\n                if (!event.shiftKey) {\n                  this.elements[type][id].selected = false;\n                  if (this.selectedItems.hasOwnProperty(id)){\n                    delete this.selectedItems[id]\n                  }\n\n                }\n              }\n            }\n            else {\n              this.elements[type][id].selected = false;\n              if (this.selectedItems.hasOwnProperty(id)){\n                    delete this.selectedItems[id]\n                  }\n\n            }\n          }\n        }\n    },\n    handleKeyPress(event) {\n      if (event.key == \"Delete\") {\n        for (const [id, value] of Object.entries(this.selectedItems)) {\n          delete this.elements[value.type][id];\n          if (this.selectedItems.hasOwnProperty(id)){\n                    delete this.selectedItems[id]\n                  }\n          this.elementsCount -= 1;\n        }\n      }\n    },\n    addNewElement(type){\n      var elementId = this.elementsHighestId +1;\n      var elementData = {\n            type: type,\n            id: elementId,\n            selected: false,\n            moving: false,\n            resizing: false,\n            backgroundColor: this.elementsDefaultBackgroundColors[type],\n      }\n      this.elements[type][elementId] = elementData\n      this.elementsHighestId += 1\n      this.elementsCount += 1\n    },\n    updateMultipleSelected(){\n      if (Object.keys(this.selectedItems).length > 1){\n        this.multipleSelected = true;\n      } else {\n        this.multipleSelected = false;\n      }\n    },\n    executeMouseDown(event){\n      if (event.button == 0 && this.multipleSelected) {\n        this.startDragging()\n      }\n    },\n    executeMouseUp(event){\n      if (event.button == 0) {\n        this.stopDragging()\n      }\n    },\n    startDragging(){\n      this.draggingIntervalId = setInterval(() => {\n                    this.drag();\n                  }, 25);\n    },\n    drag(){\n      this.dragging = true\n    },\n    stopDragging(){\n      this.dragging = false\n      clearInterval(this.draggingIntervalId)\n    }\n\n  },\n\n}\n</script>\n\n<style scoped>\n    .mainContainer{\n    position: absolute;\n    width: 100%;\n    height: 100%;\n      background-color: #ffffff;\n  }\n\n    .elementsBrowser{\n      position: absolute;\n      top: 25%;\n      -ms-transform: translateY(-50%);\n      transform: translateY(-50%);\n    }\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}