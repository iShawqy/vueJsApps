{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport squareElement from \"@/components/movableElements/squareElement\";\nimport rectangleElement from \"@/components/movableElements/rectangleElement\";\nimport CircleElement from \"@/components/movableElements/circleElement\";\nimport elementsBrowser from \"@/components/movableElements/elementsBrowser\";\nexport default {\n  name: \"mainMovableElements\",\n  components: {\n    CircleElement,\n    squareElement,\n    rectangleElement,\n    elementsBrowser\n  },\n  data() {\n    return {\n      mousePosX: 0,\n      mousePosY: 0,\n      elements: {\n        circle: {},\n        square: {},\n        rectangle: {}\n      },\n      elementsDefaultBackgroundColors: {\n        circle: 'red',\n        square: 'blue',\n        rectangle: 'green'\n      },\n      selectedItems: []\n    };\n  },\n  methods: {\n    updateMousePos(event) {\n      this.mousePosX = event.clientX;\n      this.mousePosY = event.clientY;\n    },\n    handleSelectedElement(element, event) {\n      if (element != null) {\n        for (const [key, value] of Object.entries(this.elements[element.type])) {\n          if (value.id == element.id) {\n            value.selected = true;\n          } else if (!event.shiftKey) {\n            value.selected = false;\n          }\n        }\n        if (event.shiftKey) {\n          this.selectedItems.push({\n            type: element.type,\n            id: element.id\n          });\n        } else {\n          this.selectedItems = [];\n          this.selectedItems.push({\n            type: element.type,\n            id: element.id\n          });\n        }\n      } else {\n        if (this.selectedItems.length > 0) {\n          for (const [key, value] of Object.entries(this.selectedItems)) {\n            for (let i = 0; i < this.elements[value.type].length; i++) {\n              if (this.elements[value.type][i].id == value.id) {\n                this.elements[value.type][i].selected = false;\n              }\n            }\n          }\n        }\n        this.selectedItems = [];\n      }\n    },\n    handleKeyPress(event) {\n      if (event.key == \"Delete\") {\n        if (this.selectedItems.length != 0) {\n          for (let item = 0; item < this.selectedItems.length; item++) {\n            var toDeleteIndicies = [];\n            for (let i = 0; i < this.elements[this.selectedItems[item].type].length; i++) {\n              if (this.selectedItems[item].id == this.elements[this.selectedItems[item].type][i].id) {\n                toDeleteIndicies.push(i);\n              }\n            }\n            for (let e = 0; e < toDeleteIndicies.length; e++) {\n              this.elements[this.selectedItems[item].type].splice(toDeleteIndicies[e], 1);\n            }\n          }\n        }\n      }\n    },\n    addNewElement(type) {\n      var elementId = Object.keys(this.elements).length + 1;\n      var elementData = {\n        type: type,\n        id: elementId,\n        canMove: true,\n        backgroundColor: this.elementsDefaultBackgroundColors[type],\n        selected: false\n      };\n      this.elements[type][elementId] = elementData;\n      console.log(this.elements);\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["squareElement","rectangleElement","CircleElement","elementsBrowser","name","components","data","mousePosX","mousePosY","elements","circle","square","rectangle","elementsDefaultBackgroundColors","selectedItems","methods","updateMousePos","event","clientX","clientY","handleSelectedElement","element","key","value","Object","entries","type","id","selected","shiftKey","push","length","i","handleKeyPress","item","toDeleteIndicies","e","splice","addNewElement","elementId","keys","elementData","canMove","backgroundColor","console","log"],"sourceRoot":"","sources":["/Users/ihm/myDrive/private/learning_vue/one_app_multiple_components/src/components/movableElements/mainMovableElements.vue"],"sourcesContent":["<template>\n<div class=\"mainContainer\" @mousemove=\"updateMousePos($event)\"\n     @click=\"handleSelectedElement(null)\"\n     @keyup=\"handleKeyPress($event)\" tabindex=\"0\"\n\n>\n  <elements-browser class=\"elementsBrowser animate__animated animate__fadeInLeft\"\n\n                    @addElement=\"addNewElement\" v-if=\"mousePosX<100\">\n\n  </elements-browser>\n<!--<square-element  :mouse-pos-x=\"mousePosX\" :mouse-pos-y=\"mousePosY\"-->\n<!--                :can-move=\"true\" background-color=\"red\">-->\n<!--</square-element>-->\n  <circle-element  v-for=\"element in elements.circle\"\n                   :id=\"element.id\"\n                   :key=\"element.id\"\n                   :can-move=\"element.canMove\"\n                   :background-color=\"element.backgroundColor\"\n                   @click=\"handleSelectedElement(element, $event)\"\n                   v-on:click.stop :selected-flag=\"element.selected\"\n                   :mouse-pos-x=\"mousePosX\" :mouse-pos-y=\"mousePosY\"\n  >\n</circle-element>\n\n\n    <square-element  v-for=\"element in elements.square\"\n                   :id=\"element.id\"\n                   :key=\"element.id\"\n                   :can-move=\"element.canMove\"\n                   :background-color=\"element.backgroundColor\"\n                   @click=\"handleSelectedElement(element, $event)\"\n                   v-on:click.stop :selected-flag=\"element.selected\"\n                   :mouse-pos-x=\"mousePosX\" :mouse-pos-y=\"mousePosY\"\n  >\n</square-element>\n\n   <rectangle-element  v-for=\"element in elements.rectangle\"\n                   :id=\"element.id\"\n                   :key=\"element.id\"\n                   :can-move=\"element.canMove\"\n                   :background-color=\"element.backgroundColor\"\n                   @click=\"handleSelectedElement(element, $event)\"\n                   v-on:click.stop :selected-flag=\"element.selected\"\n                   :mouse-pos-x=\"mousePosX\" :mouse-pos-y=\"mousePosY\"\n  >\n</rectangle-element>\n<!--  <rectangle-element  :mouse-pos-x=\"mousePosX\" :mouse-pos-y=\"mousePosY\"-->\n<!--                :can-move=\"true\" background-color=\"blue\">-->\n<!--</rectangle-element>-->\n  </div>\n</template>\n\n<script>\nimport squareElement from \"@/components/movableElements/squareElement\";\nimport rectangleElement from \"@/components/movableElements/rectangleElement\";\nimport CircleElement from \"@/components/movableElements/circleElement\";\nimport elementsBrowser from \"@/components/movableElements/elementsBrowser\";\n\nexport default {\nname: \"mainMovableElements\",\n  components:{CircleElement, squareElement,\n    rectangleElement, elementsBrowser},\n  data(){\n  return {\n    mousePosX: 0,\n    mousePosY: 0,\n    elements: {\n      circle: {},\n      square: {},\n      rectangle: {},\n\n    },\n    elementsDefaultBackgroundColors: {\n      circle: 'red',\n      square: 'blue',\n      rectangle: 'green'\n    },\n\n    selectedItems: [],\n  }\n  },\n  methods:{\n  updateMousePos(event){\n    this.mousePosX = event.clientX;\n    this.mousePosY = event.clientY;\n  },\n\n  handleSelectedElement(element, event){\n\n    if (element != null) {\n      for (const [key, value] of Object.entries(this.elements[element.type]) ) {\n        if (value.id == element.id) {\n          value.selected = true\n        } else if (!event.shiftKey){\n          value.selected = false\n        }\n\n      }\n      if (event.shiftKey) {\n      this.selectedItems.push({\n        type: element.type,\n        id: element.id,\n      });\n      }\n      else {\n        this.selectedItems = [];\n        this.selectedItems.push({\n        type: element.type,\n        id: element.id,\n      });\n\n      }\n\n    }\n    else {\n      if (this.selectedItems.length > 0){\n        for (const [key, value] of Object.entries(this.selectedItems) ) {\n          for (let i=0; i<this.elements[value.type].length;i++){\n            if (this.elements[value.type][i].id == value.id){\n              this.elements[value.type][i].selected = false;\n            }\n          }\n\n        }\n      }\n      this.selectedItems = [];\n    }\n\n  },\n  handleKeyPress(event){\n    if (event.key == \"Delete\"){\n      if (this.selectedItems.length != 0){\n        for (let item = 0; item < this.selectedItems.length; item++){\n          var toDeleteIndicies = [];\n          for (let i = 0; i < this.elements[this.selectedItems[item].type].length; i++) {\n          if (this.selectedItems[item].id == this.elements[this.selectedItems[item].type][i].id) {\n            toDeleteIndicies.push(i);\n          }\n        }\n          for (let e = 0; e < toDeleteIndicies.length; e++) {\n            this.elements[this.selectedItems[item].type].splice(toDeleteIndicies[e], 1)\n          }\n\n        }\n\n      }\n    }\n\n  },\n  addNewElement(type){\n    var elementId = Object.keys(this.elements).length + 1\n    var elementData = {\n          type: type,\n          id: elementId,\n          canMove: true,\n          backgroundColor: this.elementsDefaultBackgroundColors[type],\n          selected: false,\n    }\n    this.elements[type][elementId] = elementData\n    console.log(this.elements)\n\n\n  },\n\n\n  }\n}\n</script>\n\n<style scoped>\n    .mainContainer{\n    position: absolute;\n    width: 100%;\n    height: 100%;\n      background-color: #ffffff;\n  }\n\n    .elementsBrowser{\n      position: absolute;\n      top: 25%;\n      -ms-transform: translateY(-50%);\n      transform: translateY(-50%);\n    }\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}