{"ast":null,"code":"import squareElement from \"@/components/movableElements/squareElement\";\nimport rectangleElement from \"@/components/movableElements/rectangleElement\";\nimport CircleElement from \"@/components/movableElements/circleElement\";\nimport elementsBrowser from \"@/components/movableElements/elementsBrowser\";\nexport default {\n  name: \"mainMovableElements\",\n  components: {\n    CircleElement,\n    squareElement,\n    rectangleElement,\n    elementsBrowser\n  },\n  data() {\n    return {\n      mousePosX: 0,\n      mousePosY: 0,\n      elements: {\n        circle: {},\n        square: {},\n        rectangle: {}\n      },\n      elementsHighestId: 0,\n      elementsCount: 0,\n      elementsDefaultBackgroundColors: {\n        circle: 'red',\n        square: 'blue',\n        rectangle: 'green'\n      },\n      selectedItems: {},\n      multipleSelected: false,\n      dragging: false,\n      draggingIntervalId: null,\n      keyEvent: 'none'\n    };\n  },\n  mounted() {\n    setInterval(() => {\n      this.updateMultipleSelected();\n    }, 20);\n  },\n  methods: {\n    updateMousePos(event) {\n      this.mousePosX = event.clientX;\n      this.mousePosY = event.clientY;\n    },\n    executeElementClick(element, eventOriginal) {\n      var event = eventOriginal;\n      if (!event.shiftKey) {\n        if (element.selected) {\n          console('TODO: Implement an edit mode once the element is clicked when it was already clicked/selected');\n        } else {\n          this.deSelectAllElements();\n          this.elements[element.type][element.id].selected = true;\n          this.selectedItems[element.id] = element;\n        }\n      }\n\n      // Object.assign(event, eventOriginal);\n      // if (!event.shiftKey) {\n      //   for (const [type, els] of Object.entries(this.elements)) {\n      //     for (const [id, elData] of Object.entries(this.elements[type])) {\n      //       if (id == element.id) {\n      //         if (!this.elements[type][id].selected) {\n      //           this.elements[type][id].selected = true;\n      //           this.selectedItems[id] = elData;\n      //         }\n      //         // TODO: implement what should be done when the element\n      //         //  is clicked again when it was already clicked and\n      //         //  selected. maybe like the folder finders to change the name or a property\n      //       }\n      //     }\n      //   }\n      // }\n    },\n\n    deSelectAllElements() {\n      var keys = Object.keys(this.selectedItems);\n      keys.forEach(function (key, idx) {\n        console.log(key, idx);\n        var element = this.selectedItems.key;\n        this.elements[element.type][element.id].selected = false;\n        delete this.selectedItems[element.id];\n      });\n    },\n    executeElementMouseDown(element, eventOriginal) {\n      var event = eventOriginal;\n      if (event.shiftKey) {\n        if (element.selected) {\n          this.elements[element.type][element.id].selected = false;\n          if (this.selectedItems.hasOwnProperty(element.id)) {\n            delete this.selectedItems[element.id];\n          }\n        } else {\n          this.elements[element.type][element.id].selected = true;\n          this.selectedItems[element.id] = element;\n        }\n      }\n\n      //   for (const [type, els] of Object.entries(this.elements)) {\n      //     for (const [id, elData] of Object.entries(this.elements[type])) {\n      //       if (id == element.id) {\n      //         if (!this.elements[type][id].selected) {\n      //           this.elements[type][id].selected = true;\n      //           this.elements[type][id].moving = true;\n      //           this.selectedItems[id] = elData;\n      //         }\n      //         else {\n      //           if (this.elements[type][id].selected) {\n      //             this.elements[type][id].selected = false;\n      //             this.elements[type][id].moving = false;\n      //             if (this.selectedItems.hasOwnProperty(id)) {\n      //               delete this.selectedItems[id]\n      //             }\n      //           }\n      //         }\n      //       }\n      //     }\n      //   }\n      // }\n\n      // if (element != null){\n      //   element.resizing = false;\n      // }\n      // for (const [type, els] of Object.entries(this.elements)) {\n      //   for (const [id, elData] of Object.entries(this.elements[type])) {\n      //     if (element != null) {\n      //       if (id == element.id) {\n      //         if (!event.shiftKey) {\n      //           if (!this.elements[type][id].selected) {\n      //             this.elements[type][id].selected = true;\n      //             this.selectedItems[id] = elData;\n      //           }\n      //         }\n      //         else{\n      //           if (this.elements[type][id].selected){\n      //           this.elements[type][id].selected = false;\n      //           if (this.selectedItems.hasOwnProperty(id)){\n      //             delete this.selectedItems[id]\n      //           }\n      //\n      //         }\n      //           else {\n      //             this.elements[type][id].selected = true;\n      //             this.selectedItems[id] = elData;\n      //           }\n      //         }\n      //\n      //       }\n      //       else {\n      //         if (!event.shiftKey) {\n      //           this.elements[type][id].selected = false;\n      //           if (this.selectedItems.hasOwnProperty(id)){\n      //             delete this.selectedItems[id]\n      //           }\n      //\n      //         }\n      //       }\n      //     }\n      //     else {\n      //       this.elements[type][id].selected = false;\n      //       this.elements[type][id].resizing = false;\n      //       if (this.selectedItems.hasOwnProperty(id)){\n      //             delete this.selectedItems[id]\n      //           }\n      //\n      //     }\n      //   }\n      // }\n    },\n\n    executeElementMouseUp(element, eventOriginal) {\n      var event = {};\n      Object.assign(event, eventOriginal);\n      if (event.shiftKey) {\n        for (const [type, els] of Object.entries(this.elements)) {\n          for (const [id, elData] of Object.entries(this.elements[type])) {\n            if (id == element.id) {\n              if (!this.elements[type][id].selected) {\n                // this.elements[type][id].selected = true;\n                this.elements[type][id].moving = false;\n                this.selectedItems[id] = elData;\n              } else {\n                if (this.elements[type][id].selected) {\n                  this.elements[type][id].selected = false;\n                  this.elements[type][id].moving = false;\n                  if (this.selectedItems.hasOwnProperty(id)) {\n                    delete this.selectedItems[id];\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n\n      // if (element != null){\n      //   element.resizing = false;\n      // }\n      // for (const [type, els] of Object.entries(this.elements)) {\n      //   for (const [id, elData] of Object.entries(this.elements[type])) {\n      //     if (element != null) {\n      //       if (id == element.id) {\n      //         if (!event.shiftKey) {\n      //           if (!this.elements[type][id].selected) {\n      //             this.elements[type][id].selected = true;\n      //             this.selectedItems[id] = elData;\n      //           }\n      //         }\n      //         else{\n      //           if (this.elements[type][id].selected){\n      //           this.elements[type][id].selected = false;\n      //           if (this.selectedItems.hasOwnProperty(id)){\n      //             delete this.selectedItems[id]\n      //           }\n      //\n      //         }\n      //           else {\n      //             this.elements[type][id].selected = true;\n      //             this.selectedItems[id] = elData;\n      //           }\n      //         }\n      //\n      //       }\n      //       else {\n      //         if (!event.shiftKey) {\n      //           this.elements[type][id].selected = false;\n      //           if (this.selectedItems.hasOwnProperty(id)){\n      //             delete this.selectedItems[id]\n      //           }\n      //\n      //         }\n      //       }\n      //     }\n      //     else {\n      //       this.elements[type][id].selected = false;\n      //       this.elements[type][id].resizing = false;\n      //       if (this.selectedItems.hasOwnProperty(id)){\n      //             delete this.selectedItems[id]\n      //           }\n      //\n      //     }\n      //   }\n      // }\n    },\n\n    handleKeyPress(event) {\n      this.keyEvent = event.key;\n      if (event.key == \"Delete\") {\n        for (const [id, value] of Object.entries(this.selectedItems)) {\n          delete this.elements[value.type][id];\n          if (this.selectedItems.hasOwnProperty(id)) {\n            delete this.selectedItems[id];\n          }\n          this.elementsCount -= 1;\n        }\n      }\n      if (event.key == \"Enter\" || event.key == \"Escape\") {\n        if (Object.keys(this.selectedItems).length != 0) {\n          for (const [id, data] of Object.entries(this.selectedItems)) {\n            this.elements[data.type][id].selected = true;\n            this.elements[data.type][id].resizing = false;\n          }\n        }\n      }\n    },\n    addNewElement(type) {\n      var elementId = this.elementsHighestId + 1;\n      var elementData = {\n        type: type,\n        id: elementId,\n        selected: false,\n        moving: false,\n        resizing: false,\n        backgroundColor: this.elementsDefaultBackgroundColors[type]\n      };\n      this.elements[type][elementId] = elementData;\n      this.elementsHighestId += 1;\n      this.elementsCount += 1;\n    },\n    updateMultipleSelected() {\n      if (Object.keys(this.selectedItems).length > 1) {\n        this.multipleSelected = true;\n      } else {\n        this.multipleSelected = false;\n      }\n    },\n    executeParentMouseDown(eventOriginal) {\n      var event = {};\n      Object.assign(event, eventOriginal);\n      console.log('parent mouse down');\n      if (event.button == 0 && !event.shiftKey) {\n        if (Object.keys(this.selectedItems).length != 0) {\n          for (const [id, data] of Object.entries(this.selectedItems)) {\n            this.elements[data.type][id].moving = true;\n            this.elements[data.type][id].selected = true;\n            this.elements[data.type][id].resizing = false;\n          }\n        }\n      }\n    },\n    executeParentMouseUp(eventOriginal) {\n      console.log('parent mouse up');\n      var event = {};\n      Object.assign(event, eventOriginal);\n      if (event.button == 0) {\n        if (Object.keys(this.selectedItems).length != 0) {\n          for (const [id, data] of Object.entries(this.selectedItems)) {\n            this.elements[data.type][id].moving = false;\n            this.elements[data.type][id].selected = true;\n            this.elements[data.type][id].resizing = false;\n          }\n        }\n      }\n    },\n    executeParentClick(event) {\n      console.log('parent mouse click');\n      for (const [id, data] of Object.entries(this.selectedItems)) {\n        this.elements[data.type][id].selected = false;\n        delete this.selectedItems[id];\n      }\n    },\n    stopDragging() {\n      this.dragging = false;\n      clearInterval(this.draggingIntervalId);\n    },\n    resize(element) {\n      element.selected = false;\n      element.resizing = true;\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["squareElement","rectangleElement","CircleElement","elementsBrowser","name","components","data","mousePosX","mousePosY","elements","circle","square","rectangle","elementsHighestId","elementsCount","elementsDefaultBackgroundColors","selectedItems","multipleSelected","dragging","draggingIntervalId","keyEvent","mounted","setInterval","updateMultipleSelected","methods","updateMousePos","event","clientX","clientY","executeElementClick","element","eventOriginal","shiftKey","selected","console","deSelectAllElements","type","id","keys","Object","forEach","key","idx","log","executeElementMouseDown","hasOwnProperty","executeElementMouseUp","assign","els","entries","elData","moving","handleKeyPress","value","length","resizing","addNewElement","elementId","elementData","backgroundColor","executeParentMouseDown","button","executeParentMouseUp","executeParentClick","stopDragging","clearInterval","resize"],"sourceRoot":"","sources":["/Users/ihm/myDrive/private/learning_vue/one_app_multiple_components/src/components/movableElements/mainMovableElements.vue"],"sourcesContent":["<template>\n<div class=\"mainContainer\" @mousemove=\"updateMousePos($event)\"\n     @click=\"executeParentClick($event)\"\n     @keyup=\"handleKeyPress($event)\" tabindex=\"0\"\n     @mousedown=\"executeParentMouseDown($event)\"\n     @mouseup=\"executeParentMouseUp($event)\"\n\n>\n  <elements-browser class=\"elementsBrowser animate__animated animate__fadeInLeft\"\n\n                    @addElement=\"addNewElement\" v-if=\"mousePosX<100\">\n\n  </elements-browser>\n\n  <circle-element  v-for=\"element in elements.circle\"\n                   :id=\"element.id\"\n                   :key=\"element.id\"\n                   :moving=\"element.moving\"\n                   :resizing=\"element.resizing\"\n                   :background-color=\"element.backgroundColor\"\n                   @mousedown=\"executeElementMouseDown(element, $event)\"\n                   @mouseup=\"executeElementMouseUp(element, $event)\"\n                   @click=\"executeElementClick(element, $event)\"\n                   v-on:click.stop v-on:mousedown.stop v-on:mouseup.stop\n                   :selected=\"element.selected\"\n                   :mouse-pos-x=\"mousePosX\" :mouse-pos-y=\"mousePosY\"\n                   @dblclick=\"resize(element)\" :parent-key-event=\"keyEvent\"\n\n  >\n</circle-element>\n\n\n<!--    <square-element  v-for=\"element in elements.square\"-->\n<!--                   :id=\"element.id\"-->\n<!--                   :key=\"element.id\"-->\n<!--                   :can-move=\"element.canMove\"-->\n<!--                   :background-color=\"element.backgroundColor\"-->\n<!--                   @click=\"executeElementMouseDown(element, $event)\"-->\n<!--                   v-on:click.stop :selected-flag=\"element.selected\"-->\n<!--                   :mouse-pos-x=\"mousePosX\" :mouse-pos-y=\"mousePosY\"-->\n<!--                   :multiple-selected=\"multipleSelected\"-->\n<!--  >-->\n<!--</square-element>-->\n\n<!--   <rectangle-element  v-for=\"element in elements.rectangle\"-->\n<!--                   :id=\"element.id\"-->\n<!--                   :key=\"element.id\"-->\n<!--                   :can-move=\"element.canMove\"-->\n<!--                   :background-color=\"element.backgroundColor\"-->\n<!--                   @click=\"executeElementMouseDown(element, $event)\"-->\n<!--                   v-on:click.stop :selected-flag=\"element.selected\"-->\n<!--                   :mouse-pos-x=\"mousePosX\" :mouse-pos-y=\"mousePosY\"-->\n<!--                   :multiple-selected=\"multipleSelected\"-->\n<!--  >-->\n<!--</rectangle-element>-->\n\n  </div>\n</template>\n\n<script>\nimport squareElement from \"@/components/movableElements/squareElement\";\nimport rectangleElement from \"@/components/movableElements/rectangleElement\";\nimport CircleElement from \"@/components/movableElements/circleElement\";\nimport elementsBrowser from \"@/components/movableElements/elementsBrowser\";\n\n\nexport default {\nname: \"mainMovableElements\",\n  components:{CircleElement, squareElement,\n    rectangleElement, elementsBrowser},\n  data(){\n  return {\n    mousePosX: 0,\n    mousePosY: 0,\n    elements: {\n      circle: {},\n      square: {},\n      rectangle: {},\n    },\n    elementsHighestId: 0,\n    elementsCount: 0,\n    elementsDefaultBackgroundColors: {\n      circle: 'red',\n      square: 'blue',\n      rectangle: 'green'\n    },\n    selectedItems: {},\n    multipleSelected: false,\n    dragging: false,\n    draggingIntervalId: null,\n    keyEvent: 'none',\n\n  }\n  },\n  mounted() {\n    setInterval(() => {\n              this.updateMultipleSelected();\n            }, 20);\n  },\n  methods:{\n    updateMousePos(event){\n      this.mousePosX = event.clientX;\n      this.mousePosY = event.clientY;\n    },\n    executeElementClick(element, eventOriginal){\n      var event = eventOriginal;\n      if (!event.shiftKey) {\n        if (element.selected) {\n          console('TODO: Implement an edit mode once the element is clicked when it was already clicked/selected')\n        }\n        else {\n          this.deSelectAllElements();\n          this.elements[element.type][element.id].selected = true;\n          this.selectedItems[element.id] = element;\n        }\n      }\n\n\n      // Object.assign(event, eventOriginal);\n      // if (!event.shiftKey) {\n      //   for (const [type, els] of Object.entries(this.elements)) {\n      //     for (const [id, elData] of Object.entries(this.elements[type])) {\n      //       if (id == element.id) {\n      //         if (!this.elements[type][id].selected) {\n      //           this.elements[type][id].selected = true;\n      //           this.selectedItems[id] = elData;\n      //         }\n      //         // TODO: implement what should be done when the element\n      //         //  is clicked again when it was already clicked and\n      //         //  selected. maybe like the folder finders to change the name or a property\n      //       }\n      //     }\n      //   }\n      // }\n\n    },\n    deSelectAllElements(){\n      var keys = Object.keys(this.selectedItems);\n      keys.forEach(function (key, idx) {\n        console.log(key, idx);\n        var element = this.selectedItems.key;\n        this.elements[element.type][element.id].selected = false;\n        delete this.selectedItems[element.id];\n\n\n      });\n    },\n    executeElementMouseDown(element, eventOriginal){\n      var event = eventOriginal;\n      if (event.shiftKey) {\n        if (element.selected) {\n          this.elements[element.type][element.id].selected = false;\n          if (this.selectedItems.hasOwnProperty(element.id)) {\n            delete this.selectedItems[element.id]\n          }\n        }\n        else {\n          this.elements[element.type][element.id].selected = true;\n          this.selectedItems[element.id] = element;\n        }\n      }\n\n      //   for (const [type, els] of Object.entries(this.elements)) {\n      //     for (const [id, elData] of Object.entries(this.elements[type])) {\n      //       if (id == element.id) {\n      //         if (!this.elements[type][id].selected) {\n      //           this.elements[type][id].selected = true;\n      //           this.elements[type][id].moving = true;\n      //           this.selectedItems[id] = elData;\n      //         }\n      //         else {\n      //           if (this.elements[type][id].selected) {\n      //             this.elements[type][id].selected = false;\n      //             this.elements[type][id].moving = false;\n      //             if (this.selectedItems.hasOwnProperty(id)) {\n      //               delete this.selectedItems[id]\n      //             }\n      //           }\n      //         }\n      //       }\n      //     }\n      //   }\n      // }\n\n        // if (element != null){\n        //   element.resizing = false;\n        // }\n        // for (const [type, els] of Object.entries(this.elements)) {\n        //   for (const [id, elData] of Object.entries(this.elements[type])) {\n        //     if (element != null) {\n        //       if (id == element.id) {\n        //         if (!event.shiftKey) {\n        //           if (!this.elements[type][id].selected) {\n        //             this.elements[type][id].selected = true;\n        //             this.selectedItems[id] = elData;\n        //           }\n        //         }\n        //         else{\n        //           if (this.elements[type][id].selected){\n        //           this.elements[type][id].selected = false;\n        //           if (this.selectedItems.hasOwnProperty(id)){\n        //             delete this.selectedItems[id]\n        //           }\n        //\n        //         }\n        //           else {\n        //             this.elements[type][id].selected = true;\n        //             this.selectedItems[id] = elData;\n        //           }\n        //         }\n        //\n        //       }\n        //       else {\n        //         if (!event.shiftKey) {\n        //           this.elements[type][id].selected = false;\n        //           if (this.selectedItems.hasOwnProperty(id)){\n        //             delete this.selectedItems[id]\n        //           }\n        //\n        //         }\n        //       }\n        //     }\n        //     else {\n        //       this.elements[type][id].selected = false;\n        //       this.elements[type][id].resizing = false;\n        //       if (this.selectedItems.hasOwnProperty(id)){\n        //             delete this.selectedItems[id]\n        //           }\n        //\n        //     }\n        //   }\n        // }\n    },\n    executeElementMouseUp(element, eventOriginal){\n      var event = {};\n      Object.assign(event, eventOriginal);\n\n      if (event.shiftKey) {\n        for (const [type, els] of Object.entries(this.elements)) {\n          for (const [id, elData] of Object.entries(this.elements[type])) {\n\n            if (id == element.id) {\n              if (!this.elements[type][id].selected) {\n                // this.elements[type][id].selected = true;\n                this.elements[type][id].moving = false;\n                this.selectedItems[id] = elData;\n              }\n              else {\n                if (this.elements[type][id].selected) {\n                  this.elements[type][id].selected = false;\n                  this.elements[type][id].moving = false;\n                  if (this.selectedItems.hasOwnProperty(id)) {\n                    delete this.selectedItems[id]\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n\n        // if (element != null){\n        //   element.resizing = false;\n        // }\n        // for (const [type, els] of Object.entries(this.elements)) {\n        //   for (const [id, elData] of Object.entries(this.elements[type])) {\n        //     if (element != null) {\n        //       if (id == element.id) {\n        //         if (!event.shiftKey) {\n        //           if (!this.elements[type][id].selected) {\n        //             this.elements[type][id].selected = true;\n        //             this.selectedItems[id] = elData;\n        //           }\n        //         }\n        //         else{\n        //           if (this.elements[type][id].selected){\n        //           this.elements[type][id].selected = false;\n        //           if (this.selectedItems.hasOwnProperty(id)){\n        //             delete this.selectedItems[id]\n        //           }\n        //\n        //         }\n        //           else {\n        //             this.elements[type][id].selected = true;\n        //             this.selectedItems[id] = elData;\n        //           }\n        //         }\n        //\n        //       }\n        //       else {\n        //         if (!event.shiftKey) {\n        //           this.elements[type][id].selected = false;\n        //           if (this.selectedItems.hasOwnProperty(id)){\n        //             delete this.selectedItems[id]\n        //           }\n        //\n        //         }\n        //       }\n        //     }\n        //     else {\n        //       this.elements[type][id].selected = false;\n        //       this.elements[type][id].resizing = false;\n        //       if (this.selectedItems.hasOwnProperty(id)){\n        //             delete this.selectedItems[id]\n        //           }\n        //\n        //     }\n        //   }\n        // }\n    },\n    handleKeyPress(event) {\n      this.keyEvent = event.key;\n      if (event.key == \"Delete\") {\n        for (const [id, value] of Object.entries(this.selectedItems)) {\n          delete this.elements[value.type][id];\n          if (this.selectedItems.hasOwnProperty(id)){\n                    delete this.selectedItems[id]\n                  }\n          this.elementsCount -= 1;\n        }\n      }\n      if (event.key == \"Enter\" || event.key == \"Escape\") {\n        if (Object.keys(this.selectedItems).length != 0){\n          for (const [id, data] of Object.entries(this.selectedItems) ){\n            this.elements[data.type][id].selected = true;\n            this.elements[data.type][id].resizing = false;\n          }\n        }\n      }\n    },\n    addNewElement(type){\n      var elementId = this.elementsHighestId +1;\n      var elementData = {\n            type: type,\n            id: elementId,\n            selected: false,\n            moving: false,\n            resizing: false,\n            backgroundColor: this.elementsDefaultBackgroundColors[type],\n      }\n      this.elements[type][elementId] = elementData\n      this.elementsHighestId += 1\n      this.elementsCount += 1\n    },\n    updateMultipleSelected(){\n      if (Object.keys(this.selectedItems).length > 1){\n        this.multipleSelected = true;\n      } else {\n        this.multipleSelected = false;\n      }\n    },\n    executeParentMouseDown(eventOriginal){\n      var event = {};\n      Object.assign(event, eventOriginal);\n      console.log('parent mouse down')\n      if (event.button == 0 && !event.shiftKey) {\n        if (Object.keys(this.selectedItems).length != 0){\n          for (const [id, data] of Object.entries(this.selectedItems) ){\n            this.elements[data.type][id].moving = true;\n            this.elements[data.type][id].selected = true;\n            this.elements[data.type][id].resizing = false;\n          }\n        }\n      }\n    },\n\n    executeParentMouseUp(eventOriginal){\n      console.log('parent mouse up')\n      var event = {};\n      Object.assign(event, eventOriginal);\n      if (event.button == 0) {\n        if (Object.keys(this.selectedItems).length != 0){\n          for (const [id, data] of Object.entries(this.selectedItems) ){\n            this.elements[data.type][id].moving = false;\n            this.elements[data.type][id].selected = true;\n            this.elements[data.type][id].resizing = false;\n          }\n        }\n\n      }\n    },\n    executeParentClick(event) {\n      console.log('parent mouse click')\n      for (const [id, data] of Object.entries(this.selectedItems)) {\n        this.elements[data.type][id].selected = false;\n        delete this.selectedItems[id];\n      }\n    },\n\n\n    stopDragging(){\n      this.dragging = false\n      clearInterval(this.draggingIntervalId)\n    },\n    resize(element){\n      element.selected = false;\n      element.resizing = true;\n    },\n\n\n  },\n\n}\n</script>\n\n<style scoped>\n    .mainContainer{\n    position: absolute;\n    width: 100%;\n    height: 100%;\n      background-color: #ffffff;\n  }\n\n    .elementsBrowser{\n      position: absolute;\n      top: 25%;\n      -ms-transform: translateY(-50%);\n      transform: translateY(-50%);\n    }\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}