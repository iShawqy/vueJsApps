{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, vModelText as _vModelText, withKeys as _withKeys, createElementVNode as _createElementVNode, withDirectives as _withDirectives, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createCommentVNode(\"<div >\"), _withDirectives(_createElementVNode(\"textarea\", {\n    class: \"messageInputMainContainer\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.message = $event),\n    placeholder: \"Type a message\",\n    onKeyup: _cache[1] || (_cache[1] = _withKeys((...args) => $options.sendMessage && $options.sendMessage(...args), [\"enter\"])),\n    onFocus: _cache[2] || (_cache[2] = (...args) => $options.onFocus && $options.onFocus(...args)),\n    onBlur: _cache[3] || (_cache[3] = (...args) => $options.outFocus && $options.outFocus(...args))\n  }, null, 544 /* HYDRATE_EVENTS, NEED_PATCH */), [[_vModelText, $data.message]]), _createCommentVNode(\"</div>\")], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */);\n}","map":{"version":3,"mappings":";;6DACAA,6BAAa,kBACXC,oBAGY;IAHFC,KAAK,EAAC,2BAA2B;+DACxBC,aAAO;IAAEC,WAAW,EAAC,gBAAgB;IAC7CC,OAAK,mDAAQC,qDAAW;IAAGC,OAAK,yCAAED,6CAAO;IAAGE,MAAI,yCAAEF,+CAAQ;iEADlDH,aAAO,KAG5BH,6BAAa","names":["_createCommentVNode","_createElementVNode","class","$data","placeholder","onKeyup","$options","onFocus","onBlur"],"sourceRoot":"","sources":["/Users/ihm/myDrive/private/git_vuejs_apps/one_app_multiple_components/src/components/chattingApp/messageInputArea.vue"],"sourcesContent":["<template>\n<!--<div >-->\n  <textarea class=\"messageInputMainContainer\"\n            v-model=\"message\" placeholder=\"Type a message\"\n            @keyup.enter=\"sendMessage\" @focus=\"onFocus\" @blur=\"outFocus\"\n  ></textarea>\n<!--</div>-->\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\nname: \"messageInputArea\",\nprops: [\"chatter\", \"chattee\"],\nmounted() {\n  this.statusInterval = setInterval(this.updateStatus, 500)\n},\nunmounted() {\nclearInterval(this.statusInterval)\n},\n  data(){\n  return {\n    message:\"\",\n    usersUrl: \"http://localhost:3004/users\",\n    messagesUrl: \"http://localhost:3004/messages\",\n    focused: false,\n    lastState: false,\n    statusInterval:null,\n\n  }\n\n},\n  methods:{\n  sendMessage(){\n    console.log(this.message)\n    if (this.message != \"\" && this.message != \"\\n\") {\n      var currentdate = new Date();\n      var datetime = currentdate.getDate() + \"/\"\n                  + (currentdate.getMonth()+1)  + \"/\"\n                  + currentdate.getFullYear() + \" @ \"\n                  + currentdate.getHours() + \":\"\n                  + currentdate.getMinutes()\n\n\n\n      var data = {\n        content: this.message,\n        timestamp: datetime,\n        creator: this.chatter.name,\n        destination: this.chattee.name,\n      }\n      axios({\n          method: 'post',\n          url:this.messagesUrl,\n          data: data\n        })\n        .then(response => {\n          this.message = \"\";\n          this.$toast.success('sent',  {\n          position: \"bottom\",\n          duration: 250})\n        })\n        .catch(error => {\n\n          this.$toast.error('Error while logging you in', {\n          position: \"bottom\"});\n        })\n    }\n    else {\n      this.message = \"\";\n    }\n\n  },\n  onFocus(){\n    this.focused = true;\n  },\n  outFocus(){\n    this.focused = false;\n  },\n  updateStatus(){\n\n      if (this.focused && this.message != '') {\n        this.chatter.status = 'typing...'\n      } else {\n        this.chatter.status = 'Online'\n      }\n      axios({\n        method: 'put',\n        url:this.usersUrl + '/' + this.chatter.id,\n        data: this.chatter\n      })\n      .then(response => {})\n      .catch(error => {\n        this.$toast.error('Error while updating status', {\n        position: \"bottom\"});\n      })\n\n\n\n\n\n\n  },\n  }\n}\n</script>\n\n<style scoped>\n.messageInputMainContainer{\n  display: flex;\n  width: 100%;\n  height: 50px;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: flex-start;\n  flex-wrap: wrap;\n  background-color: #00301a;\n\n  border-radius: 5px;\n  color: white;\n  overflow-y: scroll;\n  font-size: 20px;\n  font-family: Arial;\n  margin: 5px;\n\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}